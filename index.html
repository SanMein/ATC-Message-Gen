<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="assets/logo.png">
    <title>ATC Message Generator</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
</head>
<body class="dark-theme">
  <!-- Header -->
  <header class="header">
    <div class="container header-container">
      <div class="logo">
        <div class="header-icon">
          <img src="assets/logo.png" alt="Logo" class="logo-img" style="width: 32px; height: 32px;">
        </div>
        <h1>ATC Message Generator</h1>
      </div>
      <div class="header-actions">
        <button id="historyBtn" class="btn-icon">
          <i class="fas fa-history"></i>
          <span>History</span>
        </button>
        <button id="helpBtn" class="btn-icon">
          <i class="fas fa-question-circle"></i>
          <span>Help</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main">
    <div class="container main-grid">
      <!-- Form Section -->
      <div class="form-section">
        <div class="card form-card">
          <div class="card-header gradient-blue">
            <h2>
              <i class="fas fa-comment-alt"></i>
              Create ATC Message
            </h2>
            <p>Generate realistic Air Traffic Control communications</p>
          </div>

          <div class="card-body">
            <!-- Tabs -->
            <div class="tabs">
              <button id="pilotTab" class="tab active">
                <i class="fas fa-plane"></i>Pilot
              </button>
              <button id="atcTab" class="tab">
                <i class="fas fa-tower-control"></i>ATC
              </button>
            </div>

            <form id="atcForm" class="form">
              <input type="hidden" id="speakerType" name="speakerType" value="Pilot">

              <!-- ATC Name -->
              <div class="form-group">
                <label for="atcName">
                  <i class="fas fa-tower-broadcast"></i>ATC Name
                </label>
                <input type="text" id="atcName" name="atcName" placeholder="KCLA, RNTI"
                       maxlength="4" pattern="[A-Z0-9]{3,4}" class="input uppercase">
                <small>3-4 letter ATC identifier</small>
              </div>

              <!-- Message Type -->
              <div class="form-group">
                <label for="commandType">
                  <i class="fas fa-list-alt"></i>Message Type
                </label>
                <select id="commandType" name="commandType" class="select" required>
                  <optgroup label="Pilot Messages">
                    <option value="Initial Contact">Initial Contact</option>
                    <option value="Request to Enter Airspace">Request to Enter Airspace</option>
                    <option value="Takeoff Request">Takeoff Request</option>
                    <option value="Landing Request">Landing Request</option>
                    <option value="Position Report">Position Report</option>
                    <option value="VFR Transition">VFR Transition</option>
                    <option value="Altitude Change Request">Altitude Change Request</option>
                    <option value="Leaving Airspace">Leaving Airspace</option>
                    <option value="Frequency Change">Frequency Change</option>
                    <option value="Uncontrolled Airport Report">Uncontrolled Airport Report</option>
                    <option value="Emergency Declaration">Emergency Declaration</option>
                    <option value="Maneuver Request">Maneuver Request</option>
                    <option value="Traffic Report">Traffic Report</option>
                  </optgroup>
                  <optgroup label="ATC Responses">
                    <option value="Initial Contact Response">Initial Contact Response</option>
                    <option value="Request to Enter Airspace Response">Request to Enter Airspace Response</option>
                    <option value="Takeoff Request Response">Takeoff Request Response</option>
                    <option value="Landing Request Response">Landing Request Response</option>
                    <option value="Emergency Declaration Response">Emergency Declaration Response</option>
                    <option value="Maneuver Request Response">Maneuver Request Response</option>
                    <option value="Traffic Report Response">Traffic Report Response</option>
                  </optgroup>
                </select>
              </div>

              <!-- Aircraft Details -->
              <div class="form-row">
                <div class="form-group">
                  <label for="tailNumber">
                    <i class="fas fa-plane"></i>Aircraft Tail Number
                  </label>
                  <input type="text" id="tailNumber" name="tailNumber" placeholder="RA-00096" class="input" required>
                </div>

                <div class="form-group">
                  <label for="runwayNumber">
                    <i class="fas fa-road"></i>Runway Number
                  </label>
                  <input type="text" id="runwayNumber" name="runwayNumber" placeholder="27" class="input">
                </div>
              </div>

              <!-- Location and Altitude -->
              <div class="form-row">
                <div class="form-group">
                  <label for="location">
                    <i class="fas fa-map-marker-alt"></i>Location
                  </label>
                  <input type="text" id="location" name="location" placeholder="10 miles southeast" class="input">
                </div>

                <div class="form-group">
                  <label for="altitude">
                    <i class="fas fa-mountain"></i>Altitude (feet)
                  </label>
                  <input type="text" id="altitude" name="altitude" placeholder="3500" class="input">
                </div>
              </div>

              <!-- ATIS and Frequency -->
              <div class="form-row">
                <div class="form-group">
                  <label for="atisInfo">
                    <i class="fas fa-info-circle"></i>ATIS Information
                  </label>
                  <input type="text" id="atisInfo" name="atisInfo" placeholder="Bravo" class="input">
                </div>

                <div class="form-group">
                  <label for="frequency">
                    <i class="fas fa-broadcast-tower"></i>Frequency
                  </label>
                  <input type="text" id="frequency" name="frequency" placeholder="120.55" class="input">
                </div>
              </div>

              <!-- Additional Notes -->
              <div class="form-group">
                <label for="notes">
                  <i class="fas fa-sticky-note"></i>Additional Notes
                </label>
                <textarea id="notes" name="notes" placeholder="VFR to the west" rows="3" class="textarea"></textarea>
              </div>

              <!-- Submit Button -->
              <button type="submit" class="btn-submit">
                <i class="fas fa-paper-plane"></i>
                Generate Message
              </button>
            </form>
          </div>
        </div>
      </div>

      <!-- Results Section -->
      <div class="results-section">
        <!-- Generated Message -->
        <div class="card message-card">
          <div class="card-header gradient-green">
            <h2>
              <i class="fas fa-comment-dots"></i>
              Generated Message
            </h2>
            <p>Your ATC communication will appear here</p>
          </div>
          <div class="card-body">
            <div id="messageOutput" class="message-output">
              <p>Fill out the form and generate a message</p>
            </div>
            <div class="message-actions">
              <button id="copyBtn" class="btn-action">
                <i class="fas fa-copy"></i>Copy
              </button>
              <button id="speakBtn" class="btn-action">
                <i class="fas fa-volume-up"></i>Speak
              </button>
              <button id="saveBtn" class="btn-action">
                <i class="fas fa-save"></i>Save
              </button>
            </div>
          </div>
        </div>

        <!-- Message History -->
        <div class="card history-card">
          <div class="card-header gradient-purple">
            <h2>
              <i class="fas fa-history"></i>
              Recent Messages
            </h2>
            <p>Your previously generated communications</p>
          </div>
          <div class="card-body">
            <div id="messageHistory" class="history-list">
              <p>No messages in history yet</p>
            </div>
            <button id="clearHistoryBtn" class="btn-clear">
              <i class="fas fa-trash-alt"></i>Clear History
            </button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <p>ATC Message Generator - Aviation communications simulator</p>
      <p>For simulation purposes only</p>
    </div>
  </footer>

  <!-- Help Modal -->
  <div id="helpModal" class="modal">
    <div class="modal-content">
      <div class="modal-header gradient-blue">
        <h3>ATC Message Generator Help</h3>
        <button id="closeHelpModal" class="modal-close">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="help-section">
          <h4>How to Use</h4>
          <p>Select Pilot or ATC, choose message type, fill details and generate.</p>
        </div>
        <div class="help-section">
          <h4>Features</h4>
          <ul>
            <li>Realistic ATC communications</li>
            <li>Text-to-speech functionality</li>
            <li>Message history</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script src="js/message-generator.js"></script>
  <script src="js/history-manager.js"></script>
  <script src="js/script.js"></script>
</body>
</html>